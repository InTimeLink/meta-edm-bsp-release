From 713b6abf79ecb39550783f6020bc7046a42be8e6 Mon Sep 17 00:00:00 2001
From: Richard Hu <richard.hu@technexion.com>
Date: Tue, 5 Jul 2016 17:34:09 +0800
Subject: [PATCH] meta-fsl-bsp-release: replace chromium recipe from 40 to 48

---
 .../chromium/chromium_40.0.2214.91.bbappend        | 38 ----------------------
 .../chromium/chromium_48.0.2548.0.bbappend         | 38 ++++++++++++++++++++++
 2 files changed, 38 insertions(+), 38 deletions(-)
 delete mode 100644 imx/meta-bsp/recipes-browser/chromium/chromium_40.0.2214.91.bbappend
 create mode 100644 imx/meta-bsp/recipes-browser/chromium/chromium_48.0.2548.0.bbappend

diff --git a/imx/meta-bsp/recipes-browser/chromium/chromium_40.0.2214.91.bbappend b/imx/meta-bsp/recipes-browser/chromium/chromium_40.0.2214.91.bbappend
deleted file mode 100644
index c9a5017..0000000
--- a/imx/meta-bsp/recipes-browser/chromium/chromium_40.0.2214.91.bbappend
+++ /dev/null
@@ -1,38 +0,0 @@
-# Update the dependency on imx-vpuwrap
-DEPENDS_remove_mx6q = " libfslvpuwrap"
-DEPENDS_remove_mx6dl = " libfslvpuwrap"
-
-DEPENDS_append_mx6q = " imx-vpuwrap"
-DEPENDS_append_mx6dl = " imx-vpuwrap"
-
-# Don't use X if it's running through Wayland
-
-CHROMIUM_ENABLE_WAYLAND = "${@base_contains('DISTRO_FEATURES', 'wayland', '1', \
-                      base_contains('DISTRO_FEATURES', 'x11', '0', \
-                      '0', d),d)}"
-
-# This is the workaround for the segfault when running google-chrome
-
-PACKAGECONFIG[ignore-gpu-blacklist] = ""
-PACKAGECONFIG_append = " ignore-gpu-blacklist"
-
-CHROMIUM_EXTRA_ARGS_append = " \
-	${@bb.utils.contains('PACKAGECONFIG', 'ignore-gpu-blacklist', '--ignore-gpu-blacklist', '', d)} \ 
-"
-
-# libffmpeg.so needs to be installed in bindir to run conformance test videos
-
-do_install_append() {
-	#Chromium plugins libs
-	for f in libpdf.so libosmesa.so libffmpegsumo.so; do
-		if [ -f "${B}/out/${CHROMIUM_BUILD_TYPE}/$f" ]; then
-                        rm -rf ${D}${libdir}/${BPN}/$f
-			install -Dm 0644 ${B}/out/${CHROMIUM_BUILD_TYPE}/$f ${D}${bindir}/${BPN}/$f
-		fi
-	done 
-}
-
-FILES_${PN}-codecs-ffmpeg_remove = "${libdir}/${BPN}/libffmpegsumo.so"
-FILES_${PN}-codecs-ffmpeg_append = " ${bindir}/${BPN}/libffmpegsumo.so"
-FILES_${PN}-plugin-pdf_remove = "${libdir}/${BPN}/libpdf.so"
-FILES_${PN}-plugin-pdf_append = " ${bindir}/${BPN}/libpdf.so"
diff --git a/imx/meta-bsp/recipes-browser/chromium/chromium_48.0.2548.0.bbappend b/imx/meta-bsp/recipes-browser/chromium/chromium_48.0.2548.0.bbappend
new file mode 100644
index 0000000..c9a5017
--- /dev/null
+++ b/imx/meta-bsp/recipes-browser/chromium/chromium_48.0.2548.0.bbappend
@@ -0,0 +1,38 @@
+# Update the dependency on imx-vpuwrap
+DEPENDS_remove_mx6q = " libfslvpuwrap"
+DEPENDS_remove_mx6dl = " libfslvpuwrap"
+
+DEPENDS_append_mx6q = " imx-vpuwrap"
+DEPENDS_append_mx6dl = " imx-vpuwrap"
+
+# Don't use X if it's running through Wayland
+
+CHROMIUM_ENABLE_WAYLAND = "${@base_contains('DISTRO_FEATURES', 'wayland', '1', \
+                      base_contains('DISTRO_FEATURES', 'x11', '0', \
+                      '0', d),d)}"
+
+# This is the workaround for the segfault when running google-chrome
+
+PACKAGECONFIG[ignore-gpu-blacklist] = ""
+PACKAGECONFIG_append = " ignore-gpu-blacklist"
+
+CHROMIUM_EXTRA_ARGS_append = " \
+	${@bb.utils.contains('PACKAGECONFIG', 'ignore-gpu-blacklist', '--ignore-gpu-blacklist', '', d)} \ 
+"
+
+# libffmpeg.so needs to be installed in bindir to run conformance test videos
+
+do_install_append() {
+	#Chromium plugins libs
+	for f in libpdf.so libosmesa.so libffmpegsumo.so; do
+		if [ -f "${B}/out/${CHROMIUM_BUILD_TYPE}/$f" ]; then
+                        rm -rf ${D}${libdir}/${BPN}/$f
+			install -Dm 0644 ${B}/out/${CHROMIUM_BUILD_TYPE}/$f ${D}${bindir}/${BPN}/$f
+		fi
+	done 
+}
+
+FILES_${PN}-codecs-ffmpeg_remove = "${libdir}/${BPN}/libffmpegsumo.so"
+FILES_${PN}-codecs-ffmpeg_append = " ${bindir}/${BPN}/libffmpegsumo.so"
+FILES_${PN}-plugin-pdf_remove = "${libdir}/${BPN}/libpdf.so"
+FILES_${PN}-plugin-pdf_append = " ${bindir}/${BPN}/libpdf.so"
-- 
1.9.1

