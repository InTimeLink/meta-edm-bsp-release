From 82c2dc4b564c17fb0032402a08b9b99e5b2f9e9a Mon Sep 17 00:00:00 2001
From: Richard Hu <richard.hu@technexion.com>
Date: Thu, 4 Aug 2016 13:05:08 +0800
Subject: [PATCH] imx/meta-sdk/recipes-qt5/qt5/qtbase: add linuxfb support for
 imx6ul when DISTRO_FEATURES isn't x11

---
 imx/meta-sdk/recipes-qt5/qt5/qtbase_%.bbappend | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

diff --git a/imx/meta-sdk/recipes-qt5/qt5/qtbase_%.bbappend b/imx/meta-sdk/recipes-qt5/qt5/qtbase_%.bbappend
index 7d4140b..ba42aff 100644
--- a/imx/meta-sdk/recipes-qt5/qt5/qtbase_%.bbappend
+++ b/imx/meta-sdk/recipes-qt5/qt5/qtbase_%.bbappend
@@ -13,14 +13,15 @@ PACKAGECONFIG_GL_mx6q = "gles2"
 PACKAGECONFIG_GL_mx6dl = "gles2"
 PACKAGECONFIG_GL_mx6sx = "gles2"
 PACKAGECONFIG_GL_mx6sl = "${@base_contains('DISTRO_FEATURES', 'x11', ' gl', '', d)}"
-PACKAGECONFIG_GL_mx6ul = "gles2"
+PACKAGECONFIG_GL_mx6ul = "${@base_contains('DISTRO_FEATURES', 'x11', ' gl', '', d)}"
 PACKAGECONFIG_GL_mx7 = "gles2"
 QT_CONFIG_FLAGS_append_mx6q = "${@base_contains('DISTRO_FEATURES', 'x11', ' -no-eglfs', ' -eglfs', d)}"
 QT_CONFIG_FLAGS_append_mx6dl = "${@base_contains('DISTRO_FEATURES', 'x11', ' -no-eglfs', ' -eglfs', d)}"
 QT_CONFIG_FLAGS_append_mx6sx = "${@base_contains('DISTRO_FEATURES', 'x11', ' -no-eglfs', ' -eglfs', d)}"
 QT_CONFIG_FLAGS_append_mx6sl = "${@base_contains('DISTRO_FEATURES', 'x11', ' -no-eglfs', \
                                                  ' -no-opengl -linuxfb -no-eglfs', d)}"
-QT_CONFIG_FLAGS_append_mx6ul = "${@base_contains('DISTRO_FEATURES', 'x11', ' -no-eglfs', ' -eglfs', d)}"
+QT_CONFIG_FLAGS_append_mx6ul = "${@base_contains('DISTRO_FEATURES', 'x11', ' -no-eglfs', \
+                                                 ' -no-opengl -linuxfb -no-eglfs', d)}"
 QT_CONFIG_FLAGS_append_mx7 = "${@base_contains('DISTRO_FEATURES', 'x11', ' -no-eglfs', ' -eglfs', d)}"
 
 do_configure_prepend() {
-- 
1.9.1

